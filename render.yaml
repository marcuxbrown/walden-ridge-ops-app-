services:
  # Web app (Next.js)
  - type: web
    name: walden-ridge-ops-web
    env: node
    plan: starter
    rootDir: apps/web
    buildCommand: npm ci && npm run build
    startCommand: npm run start
    envVars:
      - key: NODE_ENV
        value: production
      - key: GOOGLE_OAUTH_CLIENT_JSON
        sync: false
      - key: GOOGLE_OAUTH_TOKEN_JSON
        sync: false
      - key: GOOGLE_OAUTH_REDIRECT_URI
        sync: false
      - key: GOOGLE_SHEET_ID
        sync: false
      - key: GOOGLE_SHEET_NAME
        value: Intakes
      - key: GOOGLE_DRIVE_FOLDER_ID
        sync: false
      # Set this to the Render URL of the docgen service after blueprint deploy
      - key: DOCGEN_URL
        sync: false

  # PDF generator (Docker)
  - type: web
    name: walden-ridge-docgen
    env: docker
    plan: starter
    rootDir: .
    dockerfilePath: services/docgen/Dockerfile
    healthCheckPath: /health
    envVars:
      - key: GOOGLE_OAUTH_CLIENT_JSON
        sync: false
      - key: GOOGLE_OAUTH_TOKEN_JSON
        sync: false
      - key: GOOGLE_OAUTH_REDIRECT_URI
        sync: false
      - key: GOOGLE_DRIVE_FOLDER_ID
        sync: false
      - key: LOCAL_FONT_DIR
        value: /app/packages/wr-standards/assets/fonts
      - key: WR_CSS_PATH
        value: /app/packages/wr-standards/internal-pdf-style.css
      - key: WR_RUNNING_HEADER
        sync: false
